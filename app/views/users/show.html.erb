<div class="prof_header">

  <div class="row">

    <div class="col-xs-3">
      <%= cl_image_tag @user.photo, class: 'prof_pic' %>
    </div>

    <div class="col-xs-3"></div>

    <div class="col-xs-6">

      <div class="user_header">

        <div class="row">
          <div class="user_photo">
            <h1 class = "username"><%= @user.name %></h1>
          </div>

          <div class="edit_profile mp-margin">
            <%= link_to 'EDIT PROFILE', edit_user_registration_path(@user), class: 'user_edit_button btn btn-default right' if user_signed_in? && @user == current_user %>
          </div>
          <div id="follow_container_<%= @user.id %>" class="text-center">
            <%= render partial: 'follow', locals: {user: @user} %>
          </div>
        </div>  
      </div>

    </div>

  </div>

</div>
<hr>

<div class="prof_post_box">
  <div class="row">
    <div id="user-posts"></div>
  </div>
</div>

<script type="text/javascript">
  $(function(){
    let user_id = <%= @user.id %>;
    $.ajax({
      url: '/users/' + user_id + '.json',
      type: 'GET'
    })
    .done(function(data) {
      console.log(data);
      displayPosts(data);
    });
    function displayPosts(data) {
      let container = $("#user-posts");
      let htmlString = "";
      container.empty();
      if (data["posts"].length == 0) {
        htmlString = `<div class="alert alert-danger text-center" role="alert">This user has no posts yet!</div>`
      } else {
        data["posts"].forEach(function(data) {
          htmlString += `<div class="col-xs-4">
                          <a href="/posts/${data["post"]["id"]}">
                            <img src=${data["post"]["photo"]["url"]} class="prof_show">
                          </a>
                        </div>`
        });
      }
      container.append(htmlString);
    }
  });
</script>